## Отчет по лабораторной работе № 3

#### № группы: `ПМ-2401`
  
#### Выполнил: `Ядыкин Максим Михайлович`

#### Вариант: `31`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Входные и выходные данные](#2-входные-и-выходные-данные)
- [Математическая модель](#25-математическая-модель)
- [Выбор структуры данных](#3-выбор-структуры-данных)
- [Алгоритм](#4-алгоритм)
- [Программа](#5-программа)
- [Анализ правильности решения](#6-анализ-правильности-решения)

### 1. Постановка задачи

> #### Краткое описание
> Разработать программу для управления личной библиотекой, включающей книги с информацией о названии, авторе, количестве страниц и статусе прочтения. Реализовать функции добавления, удаления, сортировки книг и анализа прогресса чтения.
> #### Описание функционала
> #### 1. Добавление книги
> Добавляет книгу с указанными названием, автором и количеством страниц. Если книга с таким названием и автором уже существует, добавление не выполняется.
> #### 2. Вывод всех книг
> Отображает список всех книг в библиотеке с указанием названия, автора, количества страниц и статуса (прочитана или нет).
> #### 3. Отметить книгу прочитанной
> Устанавливает статус книги «прочитана» по её названию и автору. Если книги с такими данными нет, действие не выполняется.
> #### 4. Сортировка книг по авторам
> Сортирует книги по фамилиям авторов в алфавитном порядке. Если фамилии совпадают, сортировка выполняется по названиям книг.
> #### 5. Сортировка книг по количеству страниц
> Сортирует книги по количеству страниц в порядке убывания.
> #### 6. Вывод книг заданного автора
> Отображает список всех книг указанного автора.
> #### 7. Вывод непрочитанных книг
> Выводит список всех книг, которые ещё не были прочитаны.
> #### 8. Подсчёт страниц непрочитанных книг
> Возвращает общее количество страниц у всех непрочитанных книг.
> #### 9. Удаление книги
> Удаляет книгу по её названию и автору. Если книга не найдена, действие не выполняется.
> #### 10. Книга с наибольшим количеством страниц
> Находит книгу с максимальным количеством страниц. Если таких книг несколько, возвращается первая по порядку добавления.
> #### 11. Процент прочитанных книг
> Вычисляет процент прочитанных книг в библиотеке. Если в библиотеке нет книг, возвращает 0%.

Для данной задачи нужно написать два класса: "Библиотека" и "Книга".
Для класса "Книга" нужно описать поля с названием книги, именем автора, количеством страниц и статусом прочтения и создать методы возвращающие значения этих полей и метод изменяющий статус.
Для класса "Библиотека" нужно описать только поле с массивом книг. После этого можно выполнить 11 подзадани:
1. Проверяем, есть ли уже данная книга в массиве. Если такой книги нет, то создаем массив на 1 больше, прежнего массива. Добавляем в него старые книги, добавляем новую книг. Потом ссылаемся на этот массив.
2. Выводим при помощи цикла с счетчиком все книги на экран.
3. Находим книгу в массиве и меняем ее статус при помощи метода.
4. Сортируем пузырьком. Если автор у книг один, то сортируем по названию. Перебираем буквы, пока не попадутся две разные буквы.
5. Сортируем пузырьком книги по количеству страниц.
6. Перебираем книги, если имя автора совпадает с указанным, то выводим книгу на экран.
7. Перебираем книги, если статус "не прочитанно", то выводим книгу на экран
8. Перебираем книги, если статус "не прочитанно", прибавляем количество страниц к сумме. Возвращаем сумму.
9. Проверяем, есть ли такая книга в массиве. Если есть, то создаем массив на 1 меньше и добавляем туда все книги, кроме указанной.
10. Находим максимальный элемент массива по странницам.
11. Считаем сколько непрочитанных книг и делим это количество на длину массива.

### 3. Выбор структуры данных

Класс `Book` состоит из названия книги, имени автора, количества страниц и статусе прочтения. Значит нужно выделить 4 переменные: две переменные `name` и `author` типа данных `String`, одну переменную типа `int` для количества страниц `page`, и переменую `status` типа данных `boolean`.
Класс `Library` состоит из набора книг, то есть нужно создать массив `shelf` типа `Book[]`.

|                    | название переменной | Тип (в Java) | 
|--------------------|---------------------|--------------|
| Название книги     | `name`              | `String`     |
| Имя автора         | `a`                 | `String`     |
| Количество страниц | `page`              | `int`        |
| Статус прочтения   | `status`            | `boolean`    | 
| Набор книг         | `shelf`             | `Book[]`     |

### 4. Алгоритм

#### Алгоритм выполнения программы:

1. **Ввод данных:**  
   Программа считывает одно целое число, обозначенное как `n`.

2. **Генерация последовательности:**  
   Программа создает целочисленнй массив `a` длины `n`, в который записывает первые числа Фибоначчи. Первый и второй элемент присваеваются "вручную", остальные генерируются при помощи цикла со счетчиком и реккурентной формулы.

3. **Сортировка массива:**
    - Создается целочисленный массив `b`, куда записывается количество цифр чисел Фибоначчи. Чтобы посчитать количество цифр в числе, нужно задать счетчик и считать сколько раз можно поделить число нацело на 10, пока не останется 0.
    - Перебираем элементы двух массивов, и если количество цифр текущего и следующего числа совпадаю, а текущее число меньше следующего, то меняем их местами. 

4. **Сумма нечетных чисел:**  
   Программа создает переменную `s` и присваевывает ей значение 0. Перебираются элементы последовательности, и если остаток от деления не равен 0, то прибавляем значение к `s`.

5. **Двоичное представление чисел:**  
   Программа перебирает элементы массива, записывает в строку `y` остаток от деления на 2 и делит нацелов на 2, пока не останется 0. Создается пустая строка `r`, в которую по символьно записываются символы из строки `y`. Выводится строка `r`.

6. **Сумма цифр числа:**  
   Программа перебирает элементы массива. Запоминается значение элемента. Элемент массива обнуляется. Остатки числа при деление на 10 суммируются со значением элемента массива. Выводим получившийся массив

### 5. Программа

```java
import java.io.PrintStream;
import java.util.Scanner;
public class Main {
    public static Scanner in = new Scanner(System.in);
    public static PrintStream out = System.out;
    public static void main(String[] args) {
        //1. Считывает с консоли число N и генерирует массив первых N чисел
        //Фибоначчи.
        out.print("Введите длину последовательности: ");
        int n = in.nextInt();//считываем с консоли длину массива
        if (n==1) {//обработка исключающего случая
            out.println("Сумма всех нечетных чисел: "+1);
            out.println("Двоичное представление чисел: "+1);
            out.println("Сумма цифр каждого числа: "+1);
        }
        else {
            int [] a = new int[n];//создаем массив для нашей последовательности
            a[0] = 1;//первый элемент последовательности Фибоначчи
            a[1] = 1;//второй элемент последовательности Фибоначчи
            for (int i = 2; i < a.length; i++)//цикл для генерации массива
                a[i] = a[i-1]+a[i-2];//генерируем остальные элементы последовательности Фибоначчи по реккурентной формуле
            //2. Сортирует массив в порядке возрастания количества цифр в числе.
            //Если количества цифр равны, сортирует в порядке убывания числа.
            int [] b = new int[n];//создаем массив, где значение каждого элемента - это количество цифр числа Фибоначчи
            for (int i = 0; i < a.length; i++) {//цикл для генерации массива
                int k = 0, x = a[i];//переменная k считает количество цифр, переменная x копирует элемент изначального массива, чтобы не изменить его
                while (x > 0) { //цикл для счета количества цифр в числе
                    k++;//счетчик
                    x /= 10;//постепено избавляемя от каждой цифры в числе
                }
                b[i] = k;//записываем количество цифр в массив
            }

            for (int j = 1, z; j<n; j++)//цикл для сортикровки через совметную сортировку двух массивов
                for (int i = 0; i<n-j; i++) {
                    if(b[i]==b[i+1]&&a[i]<a[i+1]) {//если количество цифр одинаково и значение элемента меньше следующего
                        z = a[i];//то нужно поменять их местами через третью переменную
                        a[i] = a[i+1];
                        a[i+1] = z;
                    }
                }
            //3. Находит и выводит сумму всех нечётных чисел в массиве.
            int s = 0;//изначально сумма равна 0
            for (int i = 0; i < a.length; i++) {//цикл для перебора элементов последовательности
                if (a[i]%2!=0)//отбираем нечетные числа
                    s += a[i];//складываем их
            }
            out.println("Сумма всех нечетных чисел: "+s);//выводим сумму
            //4. Выводит элементы массива, заменяя каждое число на его двоичное
            //представление.
            out.print("Двоичное представление чисел: ");
            for (int i = 0, x; i < a.length; i++) {//цикл для перебора элементов последовательности
                String y = "";//создаем строку, в которую будем записывать двоичное представление чисел
                x = a[i];//создаем переменную x, чтобы не трогать элементы нашего массива
                while (x>0) {//цикл представления числа в двоичной системе счисления
                    y += x%2;//записываем каждый разряд в строку
                    x /= 2;//делим число на 2
                }
                String r = "";//создаем строку, чтобы развернуть, ведь у нас получилось двоичное число задом наперед
                for (int j = 0; j < y.length(); j++) {//цикл для перебора символов строки
                    r = y.charAt(j) + r;//записываем символы изначальной строки в обратном порядке
                }
                out.print(r+" ");//выводим двоичный вид чисел последовательности
            }
            out.println();//переходим на новую строку
            //5. Заменяет каждое число в массиве на сумму его цифр и выводит
            //полученный массив.
            for (int i = 0, x; i < a.length; i++) {//цикл для перебора элементов последовательности
                x = a[i];//запоминаем значение элемента
                a[i] = 0;//обнуляем значение элемента
                while (x>0) {//цикл для перебора цифр числа
                    a[i] += x%10;//отделяем цифру от числа и прибавляем в элемент
                    x /= 10;//делим число на 10
                }
            }
            out.print("Сумма цифр каждого числа: ");
            for (int i = 0; i < a.length; i++)//цикл для вывода элементов массива
                out.print(a[i]+" ");//выводим элементы массива
        }
    }
}
```

### 6. Анализ правильности решения

Программа работает корректно на всем множестве решений с учетом ограничений.

1. Тест на `N=1`:

    - **Input**:
        ```
        1
        ```

    - **Output**:
        ```
        Сумма всех нечетных чисел: 1
        Двоичное представление чисел: 1
        Сумма цифр каждого числа: 1
        ```

2. Тест на `N=10`:

    - **Input**:
        ```
        10
        ```

    - **Output**:
        ```
        Сумма всех нечетных чисел: 99
        Двоичное представление чисел: 1000 101 11 10 1 1 110111 100010 10101 1101
        Сумма цифр каждого числа: 8 5 3 2 1 1 10 7 3 4 
        ```
